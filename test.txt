function New-Network([string] $switchName, [string] $networkPortGroup){
    try{
        Write-Output "Initializing: $switchName"
        Write-Output "Setting up port group: $networkPortGroup"

        New-VirtualSwitch -VMHost '192.168.7.20' -Name $switchName
        Get-VMHost '192.168.7.20' | Get-VirtualSwitch -Name $switchName | New-VirtualPortGroup -Name $networkPortGroup
    }
    catch{
        Write-Output "Failed to create virtual switch or port group."
        exit
    }
}

function Get-IP([string] $vCenter, [string] $virtualMachine){
    $vmInfo = Get-VM -Name $virtualMachine
    Get-VM -Name $vmInfo | Select-Object Name, @{N="IP Address";E={@($_.Guest.IPAddress[0])}}
    Get-NetworkAdapter -Server $vCenter -VM $vmInfo.Name | Format-Table -AutoSize
}
